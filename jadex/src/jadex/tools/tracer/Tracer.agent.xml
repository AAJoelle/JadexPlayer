<agent 	xmlns="http://jadex.sourceforge.net/jadex"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://jadex.sourceforge.net/jadex 
	                    http://jadex.sourceforge.net/jadex-0.96.xsd"
	name="Tracer"
	package="jadex.tools.tracer">

	<imports>
		<import>jadex.adapter.fipa.SFipa</import>
	</imports>

	<capabilities>
		<capability name="ams" file="jadex.planlib.AMS"/>
	</capabilities>

	<beliefs>
		<belief name="ctrl" class="TracerController">
			<fact>new TracerController($agent.getExternalAccess())</fact>
		</belief>
	</beliefs>

	<goals>
		<!-- Update the agent list. -->
		<performgoal name="refresh" retry="true" exclude="never" retrydelay="1000" />
		
		<!-- Used to find other agents. -->
		<achievegoalref name="ams_search_agents">
			<concrete ref="ams.ams_search_agents"/>
		</achievegoalref>
	</goals>

	<plans>
		<!-- Plan to refresh the beliefset about agents. -->
<!--		<plan name="refresh_plan">
			<body>new AgentListUpdatePlan()</body>
			<trigger><goal ref="refresh"/></trigger>
		</plan>
		
	    <plan name="trace_plan">
			<body>new TracePlan()</body>
			<trigger><messageevent ref="agent_inform"/></trigger>
		</plan>
		
		<plan name="ctrl_plan">
			<body>new CtrlPlan()</body>
		</plan>
-->
	</plans>
	
	<events>
		<!-- Message to issue a request to an observed agent. -->
		<messageevent name="tool_request" type="fipa" direction="send">
			<parameter name="performative" class="String" direction="fixed">
				<value>SFipa.REQUEST</value>
			</parameter>
			<parameter name="ontology" class="String" direction="fixed">
				<value>"tool_management"</value>
			</parameter>
			<parameter name="language" class="String" direction="fixed">
				<value>SFipa.NUGGETS_XML</value>
			</parameter>
		</messageevent>
				<!-- Message to issue a request to an observed agent. -->
		<messageevent name="agent_inform" type="fipa" direction="receive">
			<parameter name="performative" class="String" direction="fixed">
				<value>SFipa.INFORM</value>
			</parameter>
			<parameter name="ontology" class="String" direction="fixed">
				<value>"tool_management"</value>
			</parameter>
			<parameter name="language" class="String" direction="fixed">
				<value>SFipa.NUGGETS_XML</value>
			</parameter>
		</messageevent>
	</events>
	
	<properties>
		 <!-- <property name="logging.level">java.util.logging.Level.FINE</property> -->
	</properties>
	
	<configurations>
		<configuration name="default">
			<goals><initialgoal name="refresh" ref="refresh" /></goals>
<!--			<plans><initialplan ref="ctrl_plan"/></plans> -->
		</configuration>
	</configurations>

</agent>
