<!--
	<H3>Tests a plan with a context condition.</H3>

	The context condition has to be valid during plan execution.
	Otherwise the plan is aborted.

	Has two initial plans.
	The activity plan is executed (the context is ok).
	It waits for some time.
	The remover plan waits for a shorter time
	and modifies the context, so that the
	first plans context condition is no longer
	satisfied (abort on failure).
-->

<agent xmlns="http://jadex.sourceforge.net/jadex"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://jadex.sourceforge.net/jadex 
	                    http://jadex.sourceforge.net/jadex-0.96.xsd"
	name="PlanContext"
	package="jadex.testcases.plans">

	<imports>
		<import>jadex.testcases.*</import>
		<import>jadex.planlib.TestReport</import>
	</imports>

	<capabilities>
		<capability name="testcap" file="jadex.planlib.Test"/>
	</capabilities>

	<beliefs>
		<beliefsetref name="reports" class="TestReport">
			<concrete ref="testcap.reports"/>
		</beliefsetref>
		<beliefref name="timeout" class="long" exported="true">
			<concrete ref="testcap.timeout"/>
		</beliefref>
		<beliefref name="testcenter" class="jadex.adapter.fipa.AgentIdentifier" exported="true">
			<concrete ref="testcap.testcenter"/>
		</beliefref>

		<belief name="context"  class="boolean">
			<fact>true</fact>
		</belief>
	</beliefs>

	<plans>
		<plan name="activity">
			<body>new TestContextPlan()</body>
			<contextcondition>$beliefbase.context</contextcondition>
		</plan>
		<plan name="remover">
			<body>new ResultPlan(20, true, new Boolean(false), "context")</body>
		</plan>
	</plans>

	<configurations>
		<configuration name="default">
			<plans>
				<initialplan ref="activity"/>
				<initialplan ref="remover"/>
			</plans>
		</configuration>
	</configurations>

</agent>

