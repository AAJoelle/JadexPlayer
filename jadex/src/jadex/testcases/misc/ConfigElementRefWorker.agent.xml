<!--
	<H3>Test referencing config elements by name.</H3>
	The plan checks if config elements can be named.
-->
<agent xmlns="http://jadex.sourceforge.net/jadex"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://jadex.sourceforge.net/jadex 
	                    http://jadex.sourceforge.net/jadex-0.96.xsd"
	name="ConfigElementRefWorker"
	package="jadex.testcases.misc">

	<imports>
		<import>jadex.testcases.*</import>
		<import>jadex.model.*</import>
		<import>jadex.adapter.fipa.*</import>
	</imports>
	
	<capabilities>
		<capability name="configrefcap" file="jadex.testcases.misc.ConfigElementRefWorker"/>
	</capabilities>
	
	<beliefs>
		<belief name="testagent" class="AgentIdentifier" exported="true"/>
	</beliefs>

	<goals>
		<achievegoal name="testgoal"/>
		<achievegoalref name="captestgoal">
			<concrete ref="configrefcap.testgoal"/>
		</achievegoalref>
	</goals>

	<plans>
		<plan name="configelementrefworker_plan">
			<body class="ConfigElementRefWorkerPlan"/>
			<!-- <body>new ConfigElementRefWorkerPlan()</body> -->
			<waitqueue>
				<internalevent ref="testevent"/>
				<internalevent ref="captestevent"/>
				<messageevent ref="testmsg"/>
				<messageevent ref="captestmsg"/>
				<goalfinished ref="testgoal"/>
				<goalfinished ref="captestgoal"/>
			</waitqueue>
		</plan>
		<plan name="testplan">
			<body class="WorkPlan"/>
			<!-- <body>new WorkPlan()</body> -->
		</plan>
	</plans>
	
	<events>
		<internalevent name="testevent"/>
		<internaleventref name="captestevent">
			<concrete ref="configrefcap.testevent"/>
		</internaleventref>
		<messageevent name="testmsg" type="fipa" direction="send_receive">
			<parameter name="performative" class="String" direction="fixed">
				<value>SFipa.INFORM</value>
			</parameter>
			<parameter name="content" class="String" direction="fixed">
				<value>"test message event"</value>
			</parameter>
			<parameter name="conversation-id" class="String" direction="fixed">
				<value>"test converstaion"</value>
			</parameter>
			<parameterset name="receivers" class="AgentIdentifier">
				<value>$agent.getAgentIdentifier()</value>
			</parameterset>
		</messageevent>
		<messageeventref name="captestmsg">
			<concrete ref="configrefcap.testmsg"/>
		</messageeventref>
		<messageevent name="inform_reports" type="fipa" direction="send">
			<parameter name="performative" class="String">
				<value>SFipa.INFORM</value>
			</parameter>
			<parameter name="language" class="String">
				<value>SFipa.NUGGETS_XML</value>
			</parameter>
			<parameterset name="receivers" class="AgentIdentifier">
				<value>$beliefbase.testagent</value>
			</parameterset>
		</messageevent>
	</events>

	<configurations>
		<configuration name="default">
			<goals>
				<initialgoal	ref="testgoal"		name="namedinitialgoal"/>
				<initialgoal	ref="captestgoal"	name="namedcapinitialgoal"/>
				<endgoal		ref="testgoal"		name="namedendgoal"/>
				<endgoal		ref="captestgoal"	name="namedcapendgoal"/>
			</goals>
			<plans>
				<initialplan	ref="configelementrefworker_plan"/>
				<initialplan	ref="testplan" name="namedinitialplan"/>
				<endplan		ref="testplan" name="namedendplan"/>
			</plans>
			<events>
				<initialinternalevent	ref="testevent"		name="namedinitialevent"/>
				<initialinternalevent	ref="captestevent"	name="namedcapinitialevent"/>
				<initialmessageevent	ref="testmsg"		name="namedinitialmsg"/>
				<initialmessageevent	ref="captestmsg"	name="namedcapinitialmsg"/>
				<endinternalevent		ref="testevent"		name="namedendevent"/>
				<endinternalevent		ref="captestevent"	name="namedcapendevent"/>
				<endmessageevent		ref="testmsg"		name="namedendmsg"/>
				<endmessageevent		ref="captestmsg"	name="namedcapendmsg"/>
			</events>
		</configuration>
	</configurations>

</agent>

